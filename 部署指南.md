# ArXiv 论文搜索引擎部署指南

## 本地开发环境部署

### 步骤1: 安装 Ollama 和 Qwen 模型

#### Windows 系统:
```bash
# 下载并安装 Ollama
# 访问 https://ollama.ai/download 下载 Windows 版本
# 安装后启动 Ollama

# 拉取 Qwen 模型
ollama pull qwen2.5:7b
```

#### Linux/Mac 系统:
```bash
# 安装 Ollama
curl -fsSL https://ollama.ai/install.sh | sh

# 拉取 Qwen 模型
ollama pull qwen2.5:7b

# 启动 Ollama 服务
ollama serve
```

### 步骤2: 启动后端服务

```bash
# 进入后端目录
cd backend

# Windows 系统
start.bat

# Linux/Mac 系统
chmod +x start.sh
./start.sh
```

后端服务将在 http://127.0.0.1:8001 启动

### 步骤3: 启动前端服务

```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

前端服务将在 http://127.0.0.1:5173 启动

### 步骤4: 测试系统

1. 打开浏览器访问 http://127.0.0.1:5173
2. 在搜索框输入 "machine learning"
3. 等待论文搜索结果
4. 在问答区域输入问题测试 RAG 功能

## 生产环境部署

### Netlify 前端部署

#### 步骤1: 准备前端代码
```bash
cd frontend
npm run build
```

#### 步骤2: 部署到 Netlify
1. 将 `frontend` 目录推送到 GitHub
2. 登录 Netlify，选择 "New site from Git"
3. 连接 GitHub 仓库
4. 配置构建设置：
   - Build command: `npm run build`
   - Publish directory: `dist`
5. 设置环境变量：
   - `VITE_LOCAL_API_BASE`: 你的后端 API 地址

### 后端云部署

#### 选项1: Heroku 部署
```bash
# 创建 Heroku 应用
heroku create your-arxiv-rag-backend

# 设置环境变量
heroku config:set OLLAMA_BASE_URL=你的Ollama服务地址
heroku config:set OLLAMA_MODEL=qwen2.5:7b

# 部署代码
git push heroku main
```

#### 选项2: Railway 部署
1. 连接 GitHub 仓库到 Railway
2. 配置环境变量
3. 自动部署

#### 选项3: Docker 部署
```bash
# 构建镜像
docker build -t arxiv-rag-backend .

# 运行容器
docker run -p 8001:8001 arxiv-rag-backend
```

## 环境变量配置

### 后端环境变量 (.env)
```env
# Ollama 配置
OLLAMA_BASE_URL=http://127.0.0.1:11434
OLLAMA_MODEL=qwen2.5:7b

# 服务配置
HOST=0.0.0.0
PORT=8001

# 开发模式
DEBUG=true
```

### 前端环境变量 (.env.production)
```env
# 生产环境 API 地址
VITE_LOCAL_API_BASE=https://your-backend-api.herokuapp.com
```

## 故障排除

### 常见问题1: Ollama 连接失败
**症状**: 后端无法连接到 Ollama 服务
**解决方案**:
```bash
# 检查 Ollama 服务状态
ollama list

# 重启 Ollama 服务
ollama serve

# 检查端口是否被占用
netstat -an | grep 11434
```

### 常见问题2: 依赖安装失败
**症状**: pip 或 npm 安装失败
**解决方案**:
```bash
# 使用国内镜像源
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# 清除缓存重试
npm cache clean --force
npm install
```

### 常见问题3: CORS 错误
**症状**: 前端无法调用后端 API
**解决方案**:
- 检查后端 CORS 配置
- 确认 API 地址正确
- 检查网络连接

### 常见问题4: 内存不足
**症状**: 模型加载失败或运行缓慢
**解决方案**:
- 确保系统有足够内存 (建议 16GB+)
- 考虑使用较小的模型版本
- 优化向量数据库配置

## 性能优化建议

### 1. 模型优化
- 使用量化版本的模型
- 调整模型参数
- 实现模型缓存

### 2. 数据库优化
- 定期清理向量数据库
- 优化索引策略
- 实现数据分片

### 3. 网络优化
- 使用 CDN 加速静态资源
- 实现 API 缓存
- 优化请求批处理

## 监控和维护

### 1. 系统监控
- 监控服务可用性
- 跟踪性能指标
- 日志分析

### 2. 定期维护
- 更新依赖包
- 备份数据
- 安全扫描

## 安全注意事项

### 1. API 安全
- 实现速率限制
- 输入验证和清理
- 敏感信息保护

### 2. 数据安全
- 定期备份重要数据
- 加密敏感信息
- 访问控制

## 扩展功能建议

### 1. 用户功能
- 用户注册登录
- 搜索历史记录
- 收藏论文功能

### 2. 高级搜索
- 多条件筛选
- 高级排序选项
- 搜索建议

### 3. 数据分析
- 搜索趋势分析
- 用户行为分析
- 论文热度统计

通过以上部署指南，您可以成功部署和运行 ArXiv 论文搜索引擎系统。